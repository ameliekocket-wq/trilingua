<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trilingua</title>

<link rel="apple-touch-icon" href="logo.png">
<link rel="icon" href="logo.png">

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#f2f7fb;
text-align:center;
}

h1{
margin-top:30px;
}

.container{
padding:20px;
}

.button{
padding:15px;
margin:10px;
border-radius:15px;
border:none;
background:#cfe9f7;
font-weight:bold;
cursor:pointer;
}

.level{
background:#f8cfe0;
}

.locked{
background:#aaa;
color:#555;
cursor:not-allowed;
}

.card{
background:white;
padding:20px;
margin:20px;
border-radius:20px;
}
</style>
</head>

<body>

<h1>Trilingua</h1>

<div id="menu" class="container"></div>
<div id="content"></div>

<script>

let currentLanguage = null;
let currentLevel = null;
let questionIndex = 0;
let questions = [];
let wrongQueue = [];

const data = {

nor: [
["hei","takk","br칮d","mor","vann"],
["venn","jobb","katt","hus","sol"],
["vind","regner","sn칮r","h칮st","vinter"],
["spr친k","skole","l칝rer","elev","klasse"],
["bord","stol","seng","rom","d칮r"],
["hund","fisk","melk","ost","pizza"],
["venstre","h칮yre","over","under","bak"],
["alltid","ofte","aldri","n친","senere"],
["rik","fattig","lett","vanskelig","fort"],
["familie","bestevenn","s칮ster","bror","far"]
],

spa: [
["rojo","azul","verde","negro","blanco"],
["camisa","zapatos","falda","abrigo","sombrero"],
["familia","hermano","madre","padre","abuela"],
["ayer","hoy","ma침ana","siempre","nunca"],
["comida","agua","pan","leche","vino"],
["escuela","profesor","alumno","libro","mesa"],
["grande","peque침o","r치pido","lento","nuevo"],
["tener","ir","hacer","decir","venir"],
["viajar","comer","vivir","hablar","probar"],
["ciudad","casa","calle","mercado","tienda"]
],

eng: [
["dog","cat","house","water","friend"],
["blue","green","red","black","white"],
["teacher","student","school","book","table"],
["morning","evening","yesterday","today","tomorrow"],
["shirt","shoes","jacket","hat","dress"],
["always","never","often","sometimes","now"],
["big","small","fast","slow","easy"],
["family","mother","father","sister","brother"],
["travel","eat","drink","read","write"],
["city","street","market","shop","door"]
]

};

function renderMainMenu(){
currentLanguage=null;
document.getElementById("content").innerHTML="";
document.getElementById("menu").innerHTML=`
<button class="button" onclick="openLanguage('nor')">游游 Norwegisch</button>
<button class="button" onclick="openLanguage('spa')">游쀯릖 Spanisch</button>
<button class="button" onclick="openLanguage('eng')">游섫릖 Englisch</button>
`;
}

function openLanguage(lang){
currentLanguage=lang;
renderLevels();
}

function renderLevels(){
let unlocked = parseInt(localStorage.getItem(currentLanguage+"_unlocked")) || 1;

let html="<h2>Levels</h2>";

for(let i=1;i<=10;i++){
if(i<=unlocked){
html+=`<button class="button level" onclick="startLevel(${i})">Level ${i}</button>`;
}else{
html+=`<button class="button locked">游 Level ${i}</button>`;
}
}

html+=`<br><button class="button" onclick="renderMainMenu()">Zur칲ck</button>`;

document.getElementById("menu").innerHTML=html;
}

function startLevel(level){
currentLevel=level;
questions=[...data[currentLanguage][level-1]];
wrongQueue=[];
questionIndex=0;
nextQuestion();
}

function nextQuestion(){
if(questionIndex>=questions.length){
if(wrongQueue.length>0){
questions=[...wrongQueue];
wrongQueue=[];
questionIndex=0;
}else{
finishLevel();
return;
}
}

let word = questions[questionIndex];
questionIndex++;

document.getElementById("content").innerHTML=`
<div class="card">
<h3>칖bersetze: ${word}</h3>
<input id="answer">
<br><br>
<button onclick="checkAnswer('${word}')">Check</button>
</div>
`;
}

function checkAnswer(word){
let input=document.getElementById("answer").value.trim().toLowerCase();

if(input!==word.toLowerCase()){
wrongQueue.push(word);
}

setTimeout(nextQuestion,300);
}

function finishLevel(){
let unlocked = parseInt(localStorage.getItem(currentLanguage+"_unlocked")) || 1;

if(currentLevel===unlocked && unlocked<10){
unlocked++;
localStorage.setItem(currentLanguage+"_unlocked",unlocked);
}

document.getElementById("content").innerHTML=`
<div class="card">
<h2>游꿀 Level geschafft!</h2>
<button onclick="renderLevels()">Zur칲ck zu Levels</button>
</div>
`;
}

renderMainMenu();

</script>
</body>
</html>
