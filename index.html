<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trilingua</title>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#f2f7fb;
text-align:center;
color:#333;
}

header{
background:#cfe9f7;
padding:25px;
border-bottom-left-radius:25px;
border-bottom-right-radius:25px;
}

button{
padding:12px 18px;
border:none;
border-radius:15px;
margin:8px;
font-size:16px;
cursor:pointer;
}

.lang-btn{width:220px;}
.no{background:#d7eefb;}
.es{background:#f6d6df;}
.en{background:#e6e6e6;}

.card{
background:white;
margin:25px auto;
padding:20px;
width:90%;
max-width:400px;
border-radius:20px;
box-shadow:0 5px 15px rgba(0,0,0,0.08);
}

input{
padding:10px;
border-radius:10px;
border:1px solid #ccc;
width:80%;
margin-top:10px;
}

.repeat{
font-size:12px;
color:#e67e22;
margin-top:6px;
}
</style>
</head>
<body>

<header>
<h1>Trilingua</h1>
<p>Drei Sprachen. Ein Flow.</p>
ğŸ”¥ Streak: <span id="streak">0</span>
</header>

<div id="home">
<br>
<button class="lang-btn no" onclick="startLesson('no')">ğŸ‡³ğŸ‡´ Norwegisch</button><br>
<button class="lang-btn es" onclick="startLesson('es')">ğŸ‡ªğŸ‡¸ Spanisch</button><br>
<button class="lang-btn en" onclick="startLesson('en')">ğŸ‡¬ğŸ‡§ Englisch</button>
</div>

<div id="lesson" style="display:none;"></div>

<script>

let currentQueue=[];
let wrongQueue=[];
let questionCount=0;
let currentQuestion=null;

const questions={
no:[
{q:"Was bedeutet 'Hei'?",a:"Hallo",options:["Hallo","Danke","Bitte","TschÃ¼ss"]},
{q:"Ãœbersetze: Jeg lÃ¦rer norsk",a:"Ich lerne Norwegisch",type:"text"},
{q:"Was bedeutet 'Takk'?",a:"Danke",options:["Danke","Hallo","Bitte","Nein"]},
{q:"Ãœbersetze: God morgen",a:"Guten Morgen",type:"text"},
{q:"Was bedeutet 'Ha det'?",a:"TschÃ¼ss",options:["Hallo","Bitte","TschÃ¼ss","Danke"]}
],
es:[
{q:"Was bedeutet 'Gracias'?",a:"Danke",options:["Hallo","Danke","Bitte","Nein"]},
{q:"Ãœbersetze: Buenos dÃ­as",a:"Guten Morgen",type:"text"},
{q:"Was bedeutet 'Hola'?",a:"Hallo",options:["Hallo","Danke","Bitte","TschÃ¼ss"]},
{q:"Ãœbersetze: Estoy aprendiendo espaÃ±ol",a:"Ich lerne Spanisch",type:"text"},
{q:"Was bedeutet 'AdiÃ³s'?",a:"TschÃ¼ss",options:["Hallo","Bitte","TschÃ¼ss","Nein"]}
],
en:[
{q:"Was bedeutet 'Apple'?",a:"Apfel",options:["Apfel","Birne","Banane","Traube"]},
{q:"Ãœbersetze: Good morning",a:"Guten Morgen",type:"text"},
{q:"Was bedeutet 'Goodbye'?",a:"TschÃ¼ss",options:["Hallo","Danke","TschÃ¼ss","Bitte"]},
{q:"Ãœbersetze: I learn English",a:"Ich lerne Englisch",type:"text"},
{q:"Was bedeutet 'Please'?",a:"Bitte",options:["Danke","Bitte","Hallo","Nein"]}
]
};

function startLesson(lang){
currentQueue=[...questions[lang]];
wrongQueue=[];
questionCount=0;
document.getElementById("home").style.display="none";
document.getElementById("lesson").style.display="block";
nextQuestion();
}

function nextQuestion(){
if(questionCount>=5){
if(wrongQueue.length>0){
currentQueue.push(...wrongQueue);
wrongQueue=[];
}
else{
document.getElementById("lesson").innerHTML=
`<div class="card">
<h2>ğŸ‰ Lektion abgeschlossen!</h2>
<button onclick="goHome()">ZurÃ¼ck zum MenÃ¼</button>
</div>`;
return;
}
}

currentQuestion=currentQueue.shift();
questionCount++;

renderQuestion(currentQuestion);
}

function renderQuestion(q){
let repeatMark=q.wrong?'<div class="repeat">ğŸ” Wiederholung</div>':"";

if(q.type==="text"){
document.getElementById("lesson").innerHTML=
`<div class="card">
<h3>${q.q}</h3>
${repeatMark}
<input id="answerInput">
<br>
<button onclick="checkText()">Antwort prÃ¼fen</button>
<button onclick="goHome()">Beenden</button>
</div>`;
}
else{
let buttons=q.options.map(opt=>
`<button onclick="checkOption('${opt}')">${opt}</button>`
).join("<br>");

document.getElementById("lesson").innerHTML=
`<div class="card">
<h3>${q.q}</h3>
${repeatMark}
${buttons}
<br>
<button onclick="goHome()">Beenden</button>
</div>`;
}
}

function normalize(str){
return str.toLowerCase().trim();
}

function similar(a,b){
a=normalize(a);
b=normalize(b);
if(a===b) return true;
if(Math.abs(a.length-b.length)>1) return false;
let diff=0;
for(let i=0;i<Math.min(a.length,b.length);i++){
if(a[i]!==b[i]) diff++;
}
return diff<=1;
}

function checkOption(answer){
if(answer===currentQuestion.a){
setTimeout(nextQuestion,600);
}else{
currentQuestion.wrong=true;
wrongQueue.push(currentQuestion);
setTimeout(nextQuestion,600);
}
}

function checkText(){
let input=document.getElementById("answerInput").value;
if(similar(input,currentQuestion.a)){
setTimeout(nextQuestion,600);
}else{
currentQuestion.wrong=true;
wrongQueue.push(currentQuestion);
setTimeout(nextQuestion,600);
}
}

function goHome(){
document.getElementById("lesson").style.display="none";
document.getElementById("home").style.display="block";
}

</script>
</body>
</html>
