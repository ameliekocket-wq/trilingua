<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trilingua</title>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:#f2f7fb;
text-align:center;
}

header{
background:#cfe9f7;
padding:20px;
border-bottom-left-radius:20px;
border-bottom-right-radius:20px;
}

button{
padding:10px 16px;
margin:8px;
border:none;
border-radius:12px;
cursor:pointer;
font-size:16px;
}

.levelCircle{
width:100px;
height:100px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
margin:20px;
font-weight:bold;
color:white;
}

.locked{background:#ccc;}
.open{background:#4fa3ff;}
.done{background:#4caf50;}

.map{
display:flex;
flex-direction:column;
align-items:center;
}

.card{
background:white;
padding:20px;
margin:20px auto;
width:90%;
max-width:400px;
border-radius:15px;
box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

input{
padding:8px;
border-radius:8px;
border:1px solid #aaa;
width:80%;
}
</style>
</head>

<body>

<header>
<h1>Trilingua</h1>
XP: <span id="xp">0</span>
</header>

<div id="menu">
<button onclick="openMap('nor')">üá≥üá¥ Norwegisch</button>
<button onclick="openMap('spa')">üá™üá∏ Spanisch</button>
<button onclick="openMap('eng')">üá¨üáß Englisch</button>
</div>

<div id="map" style="display:none;"></div>
<div id="lesson" style="display:none;"></div>

<script>

let XP = parseInt(localStorage.getItem("xp")) || 0;
document.getElementById("xp").innerText = XP;

let currentLang="";
let currentLevel=0;
let questionsQueue=[];
let wrongQueue=[];
let index=0;

const unlockXP=[0,30,60];

const data={
nor:[
[
{q:"Was hei√üt 'takk'?",a:"danke",o:["danke","bitte","hallo"]},
{q:"Was hei√üt 'br√∏d'?",a:"brot",o:["brot","milch","wein"]},
{q:"√úbersetze: jeg",a:"ich",type:"text"},
{q:"Was hei√üt 'mor'?",a:"mutter",o:["mutter","vater","oma"]},
{q:"Was hei√üt 'ost'?",a:"k√§se",o:["k√§se","pizza","fisch"]}
],
[
{q:"Was hei√üt 'venn'?",a:"freund",o:["freund","opa","hund"]},
{q:"Was hei√üt 'vann'?",a:"wasser",o:["wasser","wein","bier"]},
{q:"√úbersetze: far",a:"vater",type:"text"},
{q:"Was hei√üt 'dyr'?",a:"teuer",o:["billig","teuer","neu"]},
{q:"Was hei√üt 'hvor'?",a:"wo",o:["wo","wann","warum"]}
]
],
spa:[
[
{q:"Was hei√üt 'rojo'?",a:"rot",o:["rot","blau","gr√ºn"]},
{q:"√úbersetze: casa",a:"haus",type:"text"},
{q:"Was hei√üt 'perro'?",a:"hund",o:["hund","katze","vogel"]},
{q:"Was hei√üt 'escuela'?",a:"schule",o:["schule","arbeit","markt"]},
{q:"Was hei√üt 'negro'?",a:"schwarz",o:["wei√ü","schwarz","gelb"]}
],
[
{q:"Was hei√üt 'azul'?",a:"blau",o:["blau","pink","rot"]},
{q:"√úbersetze: madre",a:"mutter",type:"text"},
{q:"Was hei√üt 'zapatos'?",a:"schuhe",o:["schuhe","hose","jacke"]},
{q:"Was hei√üt 'hermano'?",a:"bruder",o:["bruder","freund","arzt"]},
{q:"Was hei√üt 'comida'?",a:"essen",o:["trinken","essen","haus"]}
]
],
eng:[
[
{q:"Was hei√üt 'dog'?",a:"hund",o:["hund","katze","maus"]},
{q:"√úbersetze: house",a:"haus",type:"text"},
{q:"Was hei√üt 'blue'?",a:"blau",o:["blau","rot","gelb"]},
{q:"Was hei√üt 'school'?",a:"schule",o:["schule","arbeit","markt"]},
{q:"Was hei√üt 'mother'?",a:"mutter",o:["mutter","oma","tante"]}
],
[
{q:"Was hei√üt 'green'?",a:"gr√ºn",o:["gr√ºn","orange","pink"]},
{q:"√úbersetze: father",a:"vater",type:"text"},
{q:"Was hei√üt 'friend'?",a:"freund",o:["freund","opa","arzt"]},
{q:"Was hei√üt 'shirt'?",a:"hemd",o:["hose","hemd","jacke"]},
{q:"Was hei√üt 'shoes'?",a:"schuhe",o:["schuhe","hut","socken"]}
]
]
};

function openMap(lang){
currentLang=lang;
document.getElementById("menu").style.display="none";
let map=document.getElementById("map");
map.style.display="block";
map.innerHTML="<h2>Level ausw√§hlen</h2><div class='map'></div><button onclick='goHome()'>Zur√ºck</button>";
let container=map.querySelector(".map");

for(let i=0;i<data[lang].length;i++){
let div=document.createElement("div");
div.classList.add("levelCircle");

if(XP>=unlockXP[i]){
div.classList.add("open");
div.innerText="Level "+(i+1);
div.onclick=()=>startLesson(i);
}else{
div.classList.add("locked");
div.innerText="üîí";
}
container.appendChild(div);
}
}

function startLesson(level){
currentLevel=level;
questionsQueue=[...data[currentLang][level]];
wrongQueue=[];
index=0;
document.getElementById("map").style.display="none";
document.getElementById("lesson").style.display="block";
nextQuestion();
}

function nextQuestion(){
if(index>=questionsQueue.length){
if(wrongQueue.length>0){
questionsQueue=[...wrongQueue];
wrongQueue=[];
index=0;
}else{
XP+=10;
localStorage.setItem("xp",XP);
document.getElementById("xp").innerText=XP;
document.getElementById("lesson").innerHTML="<div class='card'><h2>üéâ Level geschafft!</h2><button onclick='goHome()'>Zur√ºck</button></div>";
return;
}
}
render(questionsQueue[index]);
index++;
}

function render(q){
let html="<div class='card'><h3>"+q.q+"</h3>";

if(q.type==="text"){
html+="<input id='ans'><br><button onclick='checkText(\""+q.a+"\")'>OK</button>";
}else{
q.o.forEach(opt=>{
html+="<button onclick='checkMC(\""+opt+"\",\""+q.a+"\")'>"+opt+"</button><br>";
});
}

html+="<br><button onclick='goHome()'>Men√º</button></div>";
document.getElementById("lesson").innerHTML=html;
}

function checkMC(opt,correct){
if(opt!==correct){
wrongQueue.push(questionsQueue[index-1]);
}
setTimeout(nextQuestion,500);
}

function checkText(correct){
let val=document.getElementById("ans").value.toLowerCase().trim();
if(val!==correct.toLowerCase()){
wrongQueue.push(questionsQueue[index-1]);
}
setTimeout(nextQuestion,500);
}

function goHome(){
document.getElementById("lesson").style.display="none";
document.getElementById("map").style.display="none";
document.getElementById("menu").style.display="block";
}
</script>

</body>
</html>
