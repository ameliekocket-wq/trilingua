<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trilingua</title>

<style>
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,sans-serif;
    background:#f2f7fb;
    text-align:center;
}

header{
    background:#cfe9f7;
    padding:25px;
    border-bottom-left-radius:25px;
    border-bottom-right-radius:25px;
}

button{
    padding:12px 20px;
    margin:8px;
    border:none;
    border-radius:12px;
    font-size:16px;
    cursor:pointer;
}

.langBtn{width:250px;}

.card{
    background:white;
    padding:20px;
    margin:20px auto;
    width:90%;
    max-width:400px;
    border-radius:15px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

.repeat{
    color:#ff7a00;
    font-size:14px;
}

.correct{background:#c8f7c5;}
.wrong{background:#ffd6d6;}

#lesson{display:none;}
</style>
</head>

<body>

<header>
<h1>Trilingua</h1>
<p>ðŸ”¥ XP: <span id="xp">0</span></p>
</header>

<div id="menu">
<h2>Sprache wÃ¤hlen</h2>
<button class="langBtn" onclick="startLesson('nor')">ðŸ‡³ðŸ‡´ Norwegisch</button><br>
<button class="langBtn" onclick="startLesson('spa')">ðŸ‡ªðŸ‡¸ Spanisch</button><br>
<button class="langBtn" onclick="startLesson('eng')">ðŸ‡¬ðŸ‡§ Englisch</button>
</div>

<div id="lesson"></div>

<script>

let XP = 0;
let queue = [];
let repeatQueue = [];
let currentQuestion = null;

const questions = {

nor:[
{q:"Was heiÃŸt 'vin'?",a:"Wein",options:["Wein","Bier","Milch","Wasser"]},
{q:"Was heiÃŸt 'sÃ¸ster'?",a:"Schwester",options:["Mutter","Schwester","Tochter","Tante"]},
{q:"Was heiÃŸt 'vann'?",a:"Wasser",options:["Saft","Wasser","Milch","Wein"]},
{q:"Was heiÃŸt 'brÃ¸d'?",a:"Brot",options:["KÃ¤se","Fisch","Brot","Fleisch"]},
{q:"Was heiÃŸt 'hvorfor'?",a:"warum",options:["wann","warum","wo","wer"]},
{q:"Ãœbersetze: Jeg lÃ¦rer norsk",a:"Ich lerne Norwegisch",type:"text"},
{q:"Was heiÃŸt 'regner'?",a:"es regnet",options:["es schneit","es regnet","Wind","Sonne"]},
{q:"Was heiÃŸt 'jobb'?",a:"Arbeit",options:["Schule","Arbeit","Freund","Haus"]},
{q:"Was heiÃŸt 'katt'?",a:"Katze",options:["Hund","Vogel","Katze","Pferd"]},
{q:"Was heiÃŸt 'min'?",a:"mein",options:["mein","dein","sein","ihr"]}
],

spa:[
{q:"Yo ____ (hablar)",a:"hablÃ©",type:"text"},
{q:"Nosotros ____ (comer)",a:"comimos",type:"text"},
{q:"Was heiÃŸt 'rojo'?",a:"rot",options:["blau","rot","grÃ¼n","gelb"]},
{q:"Was heiÃŸt 'zapatos'?",a:"Schuhe",options:["Hemd","Schuhe","Hose","Jacke"]},
{q:"Ã‰l ____ (vivir)",a:"viviÃ³",type:"text"},
{q:"Was heiÃŸt 'familia'?",a:"Familie",options:["Freunde","Familie","Schule","Stadt"]},
{q:"Was heiÃŸt 'ayer'?",a:"gestern",options:["heute","morgen","gestern","jetzt"]},
{q:"TÃº ____ (bailar)",a:"bailaste",type:"text"},
{q:"Was heiÃŸt 'negro'?",a:"schwarz",options:["weiÃŸ","schwarz","rot","pink"]},
{q:"Was heiÃŸt 'comida'?",a:"Essen",options:["Trinken","Essen","Haus","Stuhl"]}
],

eng:[
{q:"What does 'although' mean?",a:"obwohl",options:["weil","obwohl","aber","wenn"]},
{q:"Choose correct: She ____ to school yesterday.",a:"went",options:["go","went","gone","going"]},
{q:"What does 'nevertheless' mean?",a:"trotzdem",options:["trotzdem","niemals","immer","fast"]},
{q:"Translate: I have already finished.",a:"Ich habe bereits fertiggemacht",type:"text"},
{q:"Choose correct: If I ____ more time, I would travel.",a:"had",options:["have","had","will have","having"]},
{q:"What does 'achievement' mean?",a:"Erfolg",options:["Fehler","Erfolg","Versuch","Problem"]},
{q:"Choose correct: She has been waiting for two hours.",a:"Present Perfect Progressive",options:["Simple Past","Future","Present Perfect Progressive","Past Perfect"]},
{q:"Translate: He didn't tell the truth.",a:"Er hat nicht die Wahrheit gesagt",type:"text"},
{q:"What does 'environment' mean?",a:"Umwelt",options:["Welt","Umwelt","Ort","Region"]},
{q:"Choose correct: They were watching TV.",a:"Past Progressive",options:["Simple Past","Past Progressive","Future","Present"]}
]

};

function startLesson(lang){
    queue = shuffle([...questions[lang]]);
    repeatQueue = [];
    document.getElementById("menu").style.display="none";
    document.getElementById("lesson").style.display="block";
    nextQuestion();
}

function nextQuestion(){
    if(queue.length===0){
        if(repeatQueue.length>0){
            queue = shuffle([...repeatQueue]);
            repeatQueue=[];
        }else{
            document.getElementById("lesson").innerHTML =
            "<div class='card'><h2>ðŸŽ‰ Lektion fertig!</h2><button onclick='goHome()'>ZurÃ¼ck</button></div>";
            return;
        }
    }

    currentQuestion = queue.shift();
    renderQuestion(currentQuestion);
}

function renderQuestion(q){
    let repeatMark = q.repeat ? "<div class='repeat'>âš  Wiederholung</div>" : "";

    if(q.type==="text"){
        document.getElementById("lesson").innerHTML=
        `<div class="card">
        ${repeatMark}
        <h3>${q.q}</h3>
        <input id="answer" placeholder="Antwort..."><br><br>
        <button onclick="checkText()">Antwort prÃ¼fen</button><br>
        <button onclick="goHome()">MenÃ¼</button>
        </div>`;
    }else{
        let optionsHTML="";
        q.options.forEach(opt=>{
            optionsHTML+=`<button onclick="checkMC('${opt}')">${opt}</button><br>`;
        });

        document.getElementById("lesson").innerHTML=
        `<div class="card">
        ${repeatMark}
        <h3>${q.q}</h3>
        ${optionsHTML}
        <br><button onclick="goHome()">MenÃ¼</button>
        </div>`;
    }
}

function checkMC(choice){
    if(choice===currentQuestion.a){
        XP+=10;
        document.getElementById("xp").innerText=XP;
    }else{
        currentQuestion.repeat=true;
        repeatQueue.push(currentQuestion);
    }
    setTimeout(nextQuestion,800);
}

function checkText(){
    let input=document.getElementById("answer").value.trim().toLowerCase();
    if(input===currentQuestion.a.toLowerCase()){
        XP+=15;
        document.getElementById("xp").innerText=XP;
    }else{
        currentQuestion.repeat=true;
        repeatQueue.push(currentQuestion);
    }
    setTimeout(nextQuestion,800);
}

function goHome(){
    document.getElementById("lesson").style.display="none";
    document.getElementById("menu").style.display="block";
}

function shuffle(array){
    for(let i=array.length-1;i>0;i--){
        let j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
    }
    return array;
}

</script>

</body>
</html>
